{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let PocetnaComponent = class PocetnaComponent {\n  constructor(userService, router, restaurantService) {\n    this.userService = userService;\n    this.router = router;\n    this.restaurantService = restaurantService;\n    this.page = 0;\n    this.username = \"\";\n    this.password = \"\";\n    this.type = \"\";\n    this.error = \"\";\n    this.oldPassword = \"\";\n    this.newPassword = \"\";\n    this.confirmNewPassword = \"\";\n    this.userSecurityAnswer = \"\";\n    this.restaurants = [];\n    this.waiters = [];\n    this.numGuests = 0;\n    this.numRestaurants = 0;\n    this.numReservations24 = 0;\n    this.numReservations7 = 0;\n    this.numReservations30 = 0;\n    this.sortColumn = 'name';\n    this.sortOrder = 'asc';\n    this.searchName = '';\n    this.searchAddress = '';\n    this.searchType = '';\n    this.forename = \"\";\n    this.surname = \"\";\n    this.securityQuestion = \"\";\n    this.securityAnswer = \"\";\n    this.sex = \"\";\n    this.address = \"\";\n    this.contactPhone = null;\n    this.email = \"\";\n    this.profilePicure = null;\n    this.creditCardNumber = null;\n    this.sortCriteria = \"name\";\n  }\n  ngOnInit() {\n    localStorage.removeItem(\"user\");\n    this.restaurantService.getRestaurants().subscribe(data => {\n      this.numRestaurants = data.length;\n      this.restaurants = data;\n    });\n    this.userService.getUsers().subscribe(data => {\n      this.numGuests = data.filter(elem => {\n        if (elem.type == \"guest\") return true;\n        return false;\n      }).length;\n      this.waiters = data.filter(elem => {\n        if (elem.type == \"waiter\") return true;\n        return false;\n      });\n    });\n  }\n  navigateTo(newPage) {\n    this.clear();\n    this.page = newPage;\n  }\n  // clear all fields that are shared with login/register when switching\n  clear() {\n    this.username = \"\";\n    this.password = \"\";\n    this.type = \"\";\n    this.error = \"\";\n    this.forename = \"\";\n    this.surname = \"\";\n    this.securityQuestion = \"\";\n    this.securityAnswer = \"\";\n    this.sex = \"\";\n    this.address = \"\";\n    this.contactPhone = null;\n    this.email = \"\";\n    this.profilePicure = null;\n    this.creditCardNumber = null;\n    this.oldPassword = \"\";\n    this.newPassword = \"\";\n    this.confirmNewPassword = \"\";\n    this.userSecurityAnswer = \"\";\n  }\n  get sortedAndFilteredRestaurants() {\n    return this.restaurants.filter(restaurant => restaurant.name.toLowerCase().includes(this.searchName.toLowerCase()) && restaurant.address.toLowerCase().includes(this.searchAddress.toLowerCase()) && restaurant.type.toLowerCase().includes(this.searchType.toLowerCase())).sort((a, b) => {\n      const valueA = a[this.sortColumn];\n      const valueB = b[this.sortColumn];\n      let comparison = 0;\n      if (valueA > valueB) {\n        comparison = 1;\n      } else if (valueA < valueB) {\n        comparison = -1;\n      }\n      return this.sortOrder === 'asc' ? comparison : -comparison;\n    });\n  }\n  setSort(column) {\n    if (this.sortColumn === column) {\n      this.sortOrder = this.sortOrder === 'asc' ? 'desc' : 'asc';\n    } else {\n      this.sortColumn = column;\n      this.sortOrder = 'asc';\n    }\n  }\n  login() {\n    if (this.username == \"\" || this.password == \"\") {\n      this.error = \"Unesite sve podatke!\";\n      return;\n    }\n    this.userService.login(this.username, this.password).subscribe(data => {\n      if (data) {\n        if (data.accountStatus != 1) {\n          this.error = \"This account is not active!\";\n          localStorage.removeItem(\"user\");\n          this.router.navigate([\"\"]);\n        }\n        this.error = \"\";\n        localStorage.setItem(\"user\", JSON.stringify(data));\n        this.router.navigate([data.type]);\n      } else {\n        this.error = \"User with that password doesn't exist!\";\n      }\n    });\n  }\n  register() {\n    this.type = \"guest\";\n    if (!this.username || !this.password || !this.securityQuestion || !this.securityAnswer || !this.forename || !this.surname || !this.sex || !this.address || !this.contactPhone || !this.email || !this.creditCardNumber) {\n      this.error = \"Please fill in all the required fields.\";\n      return;\n    }\n    // check if password is correct format\n    const passwordPattern = /^(?=[A-Za-z])(?=.*[A-Z])(?=(?:.*[a-z]){3,})(?=.*\\d)(?=.*[!@#$%^&*])[A-Za-z\\d!@#$%^&*]{6,10}$/;\n    if (passwordPattern.test(this.password)) {\n      this.error = \"Password must be 6-10 characters long, start with a letter, contain at least 1 capital letter, at least 3 small letters, 1 number, and 1 special character.\";\n      return;\n    }\n    // check if picture is correct format\n    if (this.profilePicure && this.profilePicure.files.length > 0) {\n      const file = this.profilePicure.files[0];\n      const validImageTypes = ['image/jpeg', 'image/png'];\n      if (!validImageTypes.includes(file.type)) {\n        this.error = \"Profile picture must be in JPG or PNG format.\";\n        return;\n      }\n      const img = new Image();\n      img.onload = () => {\n        if (img.width < 100 || img.height < 100 || img.width > 300 || img.height > 300) {\n          this.error = \"Profile picture dimensions must be between 100x100px and 300x300px.\";\n          return;\n        } else {\n          this.error = \"\"; // Clear error if all checks pass\n          // this.completeRegistration();\n        }\n      };\n      // ???\n      const reader = new FileReader();\n      reader.onload = e => {\n        img.src = e.target.result;\n      };\n      reader.readAsDataURL(file);\n    }\n    // no picture provided\n    else {\n      this.userService.register(this.username, this.password, this.forename, this.surname, this.sex, this.type, this.address, this.email, this.contactPhone, this.securityQuestion, this.securityAnswer,\n      // this.profilePicure,\n      this.creditCardNumber).subscribe(data => {\n        this.clear();\n        alert(data.msg);\n      });\n    }\n  }\n  resetPasswordKnow() {\n    ////////////////////////////////////// add password check\n    if (!this.username || !this.oldPassword || !this.newPassword || !this.confirmNewPassword) {\n      this.error = \"Please fill in all the required fields.\";\n      return;\n    }\n    if (this.newPassword != this.confirmNewPassword) {\n      this.error = \"New password must be the same in both fields!\";\n      return;\n    }\n    if (this.oldPassword == this.newPassword) {\n      this.error = \"New password can not be same as old password!\";\n      return;\n    }\n    this.userService.resetPasswordKnow(this.username, this.oldPassword, this.newPassword).subscribe(data => {\n      alert(data.msg);\n      if (data.msg == 'Success!') {\n        this.clear();\n        this.navigateTo(1);\n      }\n    });\n  }\n  resetPasswordDontKnow(step) {\n    this.error = \"\";\n    if (step == 1) {\n      if (!this.username) {\n        this.error = \"Please enter your username!\";\n        return;\n      }\n      this.userService.getSecurityDetails(this.username).subscribe(data => {\n        if (data.msg == \"User not found!\") {\n          this.error = \"Username not found!\";\n          return;\n        }\n        this.securityQuestion = data.securityQuestion;\n        this.securityAnswer = data.securityAnswer;\n        this.error = \"\";\n        this.page = 322;\n      });\n    } else if (step == 2) {\n      if (this.userSecurityAnswer != this.securityAnswer) {\n        this.error = \"The answer is not correct!\";\n        return;\n      }\n      this.error = \"\";\n      this.page = 323;\n    } else\n      // step == 3\n      {\n        ////////////////////////////// check new password valid\n        if (!this.newPassword || !this.confirmNewPassword) {\n          this.error = \"Please enter both fields!\";\n          return;\n        }\n        if (this.newPassword != this.confirmNewPassword) {\n          this.error = \"New password must be the same in both fields!\";\n          return;\n        }\n        this.userService.resetPasswordDontKnow(this.username, this.newPassword).subscribe(data => {\n          alert(data.msg);\n          if (data.msg == 'Success!') {\n            this.clear();\n            this.navigateTo(1);\n          }\n        });\n      }\n  }\n};\nPocetnaComponent = __decorate([Component({\n  selector: 'app-pocetna',\n  templateUrl: './pocetna.component.html',\n  styleUrls: ['./pocetna.component.css']\n})], PocetnaComponent);","map":{"version":3,"names":["Component","PocetnaComponent","constructor","userService","router","restaurantService","page","username","password","type","error","oldPassword","newPassword","confirmNewPassword","userSecurityAnswer","restaurants","waiters","numGuests","numRestaurants","numReservations24","numReservations7","numReservations30","sortColumn","sortOrder","searchName","searchAddress","searchType","forename","surname","securityQuestion","securityAnswer","sex","address","contactPhone","email","profilePicure","creditCardNumber","sortCriteria","ngOnInit","localStorage","removeItem","getRestaurants","subscribe","data","length","getUsers","filter","elem","navigateTo","newPage","clear","sortedAndFilteredRestaurants","restaurant","name","toLowerCase","includes","sort","a","b","valueA","valueB","comparison","setSort","column","login","accountStatus","navigate","setItem","JSON","stringify","register","passwordPattern","test","files","file","validImageTypes","img","Image","onload","width","height","reader","FileReader","e","src","target","result","readAsDataURL","alert","msg","resetPasswordKnow","resetPasswordDontKnow","step","getSecurityDetails","__decorate","selector","templateUrl","styleUrls"],"sources":["E:\\ETF\\Domaci i Projekti\\PIA Projekat\\frontend\\src\\app\\pocetna\\pocetna.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { UserService } from '../services/user.service';\nimport { RestaurantService } from '../services/restaurant.service';\nimport { Restaurant } from '../models/Restaurant';\nimport { User } from '../models/User';\n\n@Component({\n  selector: 'app-pocetna',\n  templateUrl: './pocetna.component.html',\n  styleUrls: ['./pocetna.component.css']\n})\nexport class PocetnaComponent implements OnInit {\n\n  constructor(private userService: UserService, private router: Router, private restaurantService: RestaurantService)\n  {\n\n  }\n\n  ngOnInit(): void {\n    localStorage.removeItem(\"user\")\n\n    this.restaurantService.getRestaurants().subscribe(data => {\n      this.numRestaurants = data.length\n\n      this.restaurants = data\n    })\n\n    this.userService.getUsers().subscribe(data => {\n      this.numGuests = data.filter(elem => {\n        if (elem.type == \"guest\")\n          return true\n        return false\n      }).length\n\n      this.waiters = data.filter(elem => {\n        if (elem.type == \"waiter\")\n          return true\n        return false\n      })\n    })\n  }\n\n\n\n  page: number = 0\n\n  username: string = \"\"\n  password: string = \"\"\n  type: string = \"\"\n  error: string = \"\"\n\n  oldPassword: string = \"\"\n  newPassword: string = \"\"\n  confirmNewPassword: string = \"\"\n\n  userSecurityAnswer: string = \"\"\n\n  restaurants: Restaurant[] = []\n  waiters: User[] = []\n  numGuests = 0\n  numRestaurants = 0\n  numReservations24 = 0\n  numReservations7 = 0\n  numReservations30 = 0\n\n  navigateTo(newPage: number)\n  {\n    this.clear()\n\n    this.page = newPage\n  }\n\n  // clear all fields that are shared with login/register when switching\n  clear()\n  {\n    this.username = \"\"\n    this.password = \"\"\n    this.type = \"\"\n    this.error = \"\"\n\n    this.forename = \"\"\n    this.surname = \"\"\n    this.securityQuestion = \"\"\n    this.securityAnswer = \"\"\n    this.sex = \"\"\n    this.address = \"\"\n    this.contactPhone = null\n    this.email = \"\"\n    this.profilePicure = null\n    this.creditCardNumber = null\n\n    this.oldPassword = \"\"\n    this.newPassword = \"\"\n    this.confirmNewPassword = \"\"\n\n    this.userSecurityAnswer = \"\"\n  }\n\n  sortColumn: keyof Restaurant = 'name';\n  sortOrder: 'asc' | 'desc' = 'asc';\n\n  searchName: string = '';\n  searchAddress: string = '';\n  searchType: string = '';\n\n  get sortedAndFilteredRestaurants(): Restaurant[] {\n    return this.restaurants\n      .filter(restaurant => \n        restaurant.name.toLowerCase().includes(this.searchName.toLowerCase()) &&\n        restaurant.address.toLowerCase().includes(this.searchAddress.toLowerCase()) &&\n        restaurant.type.toLowerCase().includes(this.searchType.toLowerCase())\n      )\n      .sort((a, b) => {\n        const valueA = a[this.sortColumn];\n        const valueB = b[this.sortColumn];\n        let comparison = 0;\n        if (valueA > valueB) {\n          comparison = 1;\n        } else if (valueA < valueB) {\n          comparison = -1;\n        }\n        return this.sortOrder === 'asc' ? comparison : -comparison;\n      });\n  }\n\n  setSort(column: keyof Restaurant): void {\n    if (this.sortColumn === column) {\n      this.sortOrder = this.sortOrder === 'asc' ? 'desc' : 'asc';\n    } else {\n      this.sortColumn = column;\n      this.sortOrder = 'asc';\n    }\n  }\n\n\n  login()\n  {\n    if (this.username == \"\" || this.password == \"\")\n    {\n      this.error = \"Unesite sve podatke!\";\n      return;\n    }\n\n    this.userService.login(this.username, this.password).subscribe(data =>{\n      if (data)\n      {\n        if (data.accountStatus != 1)\n        {\n          this.error = \"This account is not active!\"\n          localStorage.removeItem(\"user\")\n          this.router.navigate([\"\"]);\n        }\n\n        this.error = \"\"\n        localStorage.setItem(\"user\", JSON.stringify(data))\n        this.router.navigate([data.type]);\n      }\n      else\n      {\n        this.error = \"User with that password doesn't exist!\"\n      }\n    })\n  }\n\n  forename = \"\"\n  surname = \"\"\n  securityQuestion = \"\"\n  securityAnswer = \"\"\n  sex = \"\"\n  address = \"\"\n  contactPhone: number | null = null\n  email = \"\"\n  profilePicure: any | null = null\n  creditCardNumber: number | null = null\n  sortCriteria = \"name\"\n\n\n  register()\n  {\n    this.type = \"guest\"\n\n    if (!this.username || !this.password || !this.securityQuestion || !this.securityAnswer ||\n      !this.forename || !this.surname || !this.sex || !this.address || !this.contactPhone ||\n      !this.email || !this.creditCardNumber) {\n      this.error = \"Please fill in all the required fields.\";\n      return;\n    }\n\n    // check if password is correct format\n    const passwordPattern = /^(?=[A-Za-z])(?=.*[A-Z])(?=(?:.*[a-z]){3,})(?=.*\\d)(?=.*[!@#$%^&*])[A-Za-z\\d!@#$%^&*]{6,10}$/\n    ;\n\n    if (passwordPattern.test(this.password)) {\n      this.error = \"Password must be 6-10 characters long, start with a letter, contain at least 1 capital letter, at least 3 small letters, 1 number, and 1 special character.\";\n      return;\n    }\n\n    // check if picture is correct format\n    if (this.profilePicure && this.profilePicure.files.length > 0) {\n      const file = this.profilePicure.files[0];\n      const validImageTypes = ['image/jpeg', 'image/png'];\n      if (!validImageTypes.includes(file.type)) {\n        this.error = \"Profile picture must be in JPG or PNG format.\";\n        return;\n      }\n      const img = new Image();\n      img.onload = () => {\n        if (img.width < 100 || img.height < 100 || img.width > 300 || img.height > 300) {\n          this.error = \"Profile picture dimensions must be between 100x100px and 300x300px.\";\n          return;\n        } else {\n          this.error = \"\"; // Clear error if all checks pass\n          // this.completeRegistration();\n        }\n      };\n    \n\n      // ???\n      const reader = new FileReader();\n        reader.onload = (e: any) => {\n          img.src = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      } \n      // no picture provided\n      else {\n        this.userService.register(this.username,\n          this.password,\n          this.forename,\n          this.surname,\n          this.sex,\n          this.type,\n          this.address,\n          this.email,\n          this.contactPhone,\n          this.securityQuestion,\n          this.securityAnswer,\n          // this.profilePicure,\n          this.creditCardNumber)\n          .subscribe((data:any) => {\n            this.clear()\n            alert(data.msg)\n        })\n      }\n\n\n\n  }\n\n  resetPasswordKnow()\n  {\n    ////////////////////////////////////// add password check\n\n    if (!this.username || !this.oldPassword || !this.newPassword || !this.confirmNewPassword) {\n      this.error = \"Please fill in all the required fields.\";\n      return;\n    }\n\n    if (this.newPassword != this.confirmNewPassword)\n    {\n      this.error = \"New password must be the same in both fields!\";\n      return;\n    }\n\n    if (this.oldPassword == this.newPassword)\n    {\n      this.error = \"New password can not be same as old password!\";\n      return;\n    }\n\n    this.userService.resetPasswordKnow(this.username, this.oldPassword, this.newPassword).subscribe((data:any) => {\n      alert(data.msg)\n      if (data.msg == 'Success!')\n      {\n        this.clear()\n        this.navigateTo(1)\n      }\n\n    })\n  }\n\n  resetPasswordDontKnow(step: number)\n  {\n    this.error = \"\"\n\n    if (step == 1)\n    {\n      if (!this.username)\n      {\n        this.error = \"Please enter your username!\"\n        return\n      }\n\n      this.userService.getSecurityDetails(this.username).subscribe((data:any) => {\n\n        if (data.msg == \"User not found!\")\n        {\n            this.error = \"Username not found!\"\n            return\n        }\n\n        this.securityQuestion = data.securityQuestion\n        this.securityAnswer = data.securityAnswer\n\n\n        this.error = \"\"\n        this.page = 322\n      })\n    }\n    else if(step == 2)\n    {\n      if (this.userSecurityAnswer != this.securityAnswer)\n      {\n        this.error = \"The answer is not correct!\"\n        return\n      }\n\n      this.error = \"\"\n      this.page = 323\n    }\n    else // step == 3\n    {\n      ////////////////////////////// check new password valid\n\n      if (!this.newPassword || !this.confirmNewPassword)\n      {\n        this.error = \"Please enter both fields!\";\n        return;\n      }\n\n      if (this.newPassword != this.confirmNewPassword)\n      {\n        this.error = \"New password must be the same in both fields!\";\n        return;\n      }\n\n      this.userService.resetPasswordDontKnow(this.username, this.newPassword).subscribe((data:any) => {\n        alert(data.msg)\n        if (data.msg == 'Success!')\n        {\n          this.clear()\n          this.navigateTo(1)\n        }\n      })\n    \n\n    }\n  }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}